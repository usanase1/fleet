<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Driver Reports - UR Fleet Management System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="admin-dashboard.css">
    <style>
        .reports-container {
            padding: 20px;
        }
        
        .reports-filters {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .filter-group {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .filter-group select,
        .filter-group input {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: white;
        }
        
        .reports-list {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .report-card {
            border: 1px solid #eee;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .report-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .report-type {
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: 500;
        }
        
        .report-type.fuel {
            background-color: #d4edda;
            color: #155724;
        }
        
        .report-type.maintenance {
            background-color: #fff3cd;
            color: #856404;
        }
        
        .report-type.issue {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        .report-details {
            margin-top: 10px;
        }
        
        .report-meta {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            color: #666;
            font-size: 0.9rem;
        }

        .status-badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .status-approved {
            background-color: #d4edda;
            color: #155724;
        }

        .status-pending {
            background-color: #fff3cd;
            color: #856404;
        }

        .status-rejected {
            background-color: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <img src="./image/logo_for_ur.png" alt="University of Rwanda Logo" class="logo" />
                <h2>Admin Portal</h2>
            </div>
            <ul class="nav-links">
                <li><a href="admin-dashboard.html"><i class="fas fa-home"></i> Dashboard</a></li>
                <li><a href="vehicles.html"><i class="fas fa-car"></i> Vehicles</a></li>
                <li class="active"><a href="drivers.html"><i class="fas fa-clipboard-list"></i> Driver Reports</a></li>
                <li><a href="request-management.html"><i class="fas fa-tasks"></i> Request Management</a></li>
                <li> <a href="request-overview.html"><i class="fas fa-chart-pie"></i> Request Overview</a>
            </ul>
            <div class="sidebar-footer">
                <a href="#profile"><i class="fas fa-user-circle"></i> Profile</a>
                <a href="login.html"><i class="fas fa-sign-out-alt"></i> Logout</a>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <header class="top-bar">
                <div class="search-bar">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search reports...">
                </div>
                <div class="user-info">
                    <span class="notifications">
                        <i class="fas fa-bell"></i>
                        <span class="badge">3</span>
                    </span>
                    <div class="user-profile">
                        <img src="./image/avatar.png" alt="Admin Profile" />
                        <span>Admin</span>
                    </div>
                </div>
            </header>

            <div class="reports-container">
                <div class="reports-filters">
                    <div class="filter-group">
                        <label>Driver:</label>
                        <select id="driverFilter">
                            <option value="">All Drivers</option>
                            <option value="driver1">John Doe</option>
                            <option value="driver2">Jane Smith</option>
                            <option value="driver3">Robert Johnson</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Report Type:</label>
                        <select id="reportTypeFilter">
                            <option value="">All Types</option>
                            <option value="fuel">Fuel Reports</option>
                            <option value="maintenance">Maintenance Reports</option>
                            <option value="issue">Issue Reports</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Date Range:</label>
                        <input type="date" id="startDate">
                        <span>to</span>
                        <input type="date" id="endDate">
                    </div>
                    <div class="filter-group">
                        <label>Status:</label>
                        <select id="statusFilter">
                            <option value="">All Status</option>
                            <option value="approved">Approved</option>
                            <option value="pending">Pending</option>
                            <option value="rejected">Rejected</option>
                        </select>
                    </div>
                </div>

                <div class="reports-list">
                    <!-- Fuel Report Card -->
                    <div class="report-card" data-type="fuel" data-status="approved">
                        <div class="report-header">
                            <h3>Fuel Report - Vehicle #VH-001</h3>
                            <span class="report-type fuel">Fuel Report</span>
                        </div>
                        <div class="report-details">
                            <p><strong>Driver:</strong> John Doe</p>
                            <p><strong>Date:</strong> 2024-04-15</p>
                            <p><strong>Fuel Amount:</strong> 20 Liters</p>
                            <p><strong>Cost:</strong> 25,000 RWF</p>
                            <p><strong>Odometer Reading:</strong> 45,000 km</p>
                        </div>
                        <div class="report-meta">
                            <span>Submitted: 2024-04-15 14:30</span>
                            <span class="status-badge status-approved">Approved</span>
                        </div>
                    </div>

                    <!-- Maintenance Report Card -->
                    <div class="report-card" data-type="maintenance" data-status="pending">
                        <div class="report-header">
                            <h3>Maintenance Report - Vehicle #VH-002</h3>
                            <span class="report-type maintenance">Maintenance</span>
                        </div>
                        <div class="report-details">
                            <p><strong>Driver:</strong> Jane Smith</p>
                            <p><strong>Date:</strong> 2024-04-14</p>
                            <p><strong>Issue:</strong> Brake System Check</p>
                            <p><strong>Status:</strong> Completed</p>
                            <p><strong>Cost:</strong> 50,000 RWF</p>
                        </div>
                        <div class="report-meta">
                            <span>Submitted: 2024-04-14 16:45</span>
                            <span class="status-badge status-pending">Pending Review</span>
                        </div>
                    </div>

                    <!-- Issue Report Card -->
                    <div class="report-card" data-type="issue" data-status="pending">
                        <div class="report-header">
                            <h3>Vehicle Issue - Vehicle #VH-003</h3>
                            <span class="report-type issue">Issue Report</span>
                        </div>
                        <div class="report-details">
                            <p><strong>Driver:</strong> Robert Johnson</p>
                            <p><strong>Date:</strong> 2024-04-13</p>
                            <p><strong>Issue:</strong> Engine Overheating</p>
                            <p><strong>Severity:</strong> High</p>
                            <p><strong>Action Taken:</strong> Vehicle taken to service center</p>
                        </div>
                        <div class="report-meta">
                            <span>Submitted: 2024-04-13 10:15</span>
                            <span class="status-badge status-pending">In Progress</span>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get filter elements
            const driverFilter = document.getElementById('driverFilter');
            const reportTypeFilter = document.getElementById('reportTypeFilter');
            const statusFilter = document.getElementById('statusFilter');
            const startDate = document.getElementById('startDate');
            const endDate = document.getElementById('endDate');
            const searchInput = document.querySelector('.search-bar input');
            const reportCards = document.querySelectorAll('.report-card');

            // Function to filter reports
            function filterReports() {
                const selectedDriver = driverFilter.value;
                const selectedType = reportTypeFilter.value;
                const selectedStatus = statusFilter.value;
                const startDateValue = startDate.value;
                const endDateValue = endDate.value;
                const searchTerm = searchInput.value.toLowerCase();

                reportCards.forEach(card => {
                    const cardDriver = card.querySelector('.report-details p:first-child').textContent.toLowerCase();
                    const cardType = card.getAttribute('data-type');
                    const cardStatus = card.getAttribute('data-status');
                    const cardDate = card.querySelector('.report-details p:nth-child(2)').textContent.split(': ')[1];
                    const cardTitle = card.querySelector('h3').textContent.toLowerCase();
                    const cardDetails = card.querySelector('.report-details').textContent.toLowerCase();

                    const matchesDriver = !selectedDriver || cardDriver.includes(selectedDriver.toLowerCase());
                    const matchesType = !selectedType || cardType === selectedType;
                    const matchesStatus = !selectedStatus || cardStatus === selectedStatus;
                    const matchesDate = (!startDateValue || cardDate >= startDateValue) && 
                                      (!endDateValue || cardDate <= endDateValue);
                    const matchesSearch = !searchTerm || 
                                        cardTitle.includes(searchTerm) || 
                                        cardDetails.includes(searchTerm);

                    if (matchesDriver && matchesType && matchesStatus && matchesDate && matchesSearch) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                });
            }

            // Add event listeners to filters
            driverFilter.addEventListener('change', filterReports);
            reportTypeFilter.addEventListener('change', filterReports);
            statusFilter.addEventListener('change', filterReports);
            startDate.addEventListener('change', filterReports);
            endDate.addEventListener('change', filterReports);
            searchInput.addEventListener('input', filterReports);

            // Check authentication
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            if (!isLoggedIn) {
                window.location.href = 'login.html';
                return;
            }

            // Update user name in the dashboard
            const username = localStorage.getItem('username');
            if (username) {
                document.querySelector('.user-profile span').textContent = username;
            }

            // Handle logout
            document.querySelector('a[href="login.html"]').addEventListener('click', function(e) {
                e.preventDefault();
                localStorage.removeItem('isLoggedIn');
                localStorage.removeItem('username');
                window.location.href = 'login.html';
            });
        });
    </script>
</body>
</html> 